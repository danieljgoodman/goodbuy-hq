<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Health Dashboard Component Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f8fafc;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
      }
      .card {
        background: white;
        border-radius: 8px;
        padding: 24px;
        margin: 16px 0;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      .score-circle {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: conic-gradient(
          #22c55e 0deg,
          #22c55e calc(var(--score) * 3.6deg),
          #e5e7eb calc(var(--score) * 3.6deg)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }
      .score-circle::before {
        content: '';
        position: absolute;
        inset: 8px;
        background: white;
        border-radius: 50%;
      }
      .score-text {
        position: relative;
        z-index: 1;
        font-size: 24px;
        font-weight: bold;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 16px;
        margin: 24px 0;
      }
      .status-excellent {
        color: #10b981;
      }
      .status-good {
        color: #22c55e;
      }
      .status-fair {
        color: #eab308;
      }
      .status-poor {
        color: #f97316;
      }
      .status-critical {
        color: #ef4444;
      }
      .badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 500;
        background-color: #f1f5f9;
        color: #475569;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React

      // Mock health data similar to what our components expect
      const mockHealthData = {
        businessId: 'test-business',
        businessName: 'TechCorp Solutions',
        calculatedAt: new Date().toISOString(),
        overallScore: 78,
        financialScore: 82,
        growthScore: 75,
        operationalScore: 80,
        saleReadinessScore: 74,
        confidenceLevel: 85,
        trajectory: 'IMPROVING',
        dataSources: {
          financial: true,
          operational: true,
          market: false,
          historical: true,
        },
        dataQuality: 'high',
        calculationMetadata: {
          calculationDuration: '2.3s',
          insights: {
            summary:
              'Strong financial performance with good operational efficiency',
            keyStrengths: [
              {
                title: 'Revenue Growth',
                description: 'Consistent 15% YoY growth',
              },
              {
                title: 'Profit Margins',
                description: 'Above industry average at 22%',
              },
            ],
            keyWeaknesses: [
              {
                title: 'Market Presence',
                description: 'Limited geographic reach',
              },
            ],
            recommendations: [
              {
                title: 'Expand Marketing',
                description: 'Invest in digital marketing channels',
              },
            ],
          },
        },
      }

      function getScoreColor(score) {
        if (score >= 90) return 'status-excellent'
        if (score >= 75) return 'status-good'
        if (score >= 60) return 'status-fair'
        if (score >= 40) return 'status-poor'
        return 'status-critical'
      }

      function getScoreStatus(score) {
        if (score >= 90) return 'Excellent'
        if (score >= 75) return 'Good'
        if (score >= 60) return 'Fair'
        if (score >= 40) return 'Poor'
        return 'Critical'
      }

      function HealthScoreCard({ score, label, description }) {
        return (
          <div className="card">
            <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>
              <div className="score-circle" style={{ '--score': score }}>
                <div className="score-text">{Math.round(score)}</div>
              </div>
              <div>
                <h3 style={{ margin: 0, fontSize: '18px' }}>{label}</h3>
                <p
                  style={{
                    margin: '4px 0',
                    color: '#64748b',
                    fontSize: '14px',
                  }}
                >
                  {description}
                </p>
                <span className={`badge ${getScoreColor(score)}`}>
                  {getScoreStatus(score)}
                </span>
              </div>
            </div>
          </div>
        )
      }

      function HealthDashboardTest() {
        return (
          <div className="container">
            <h1 style={{ textAlign: 'center', marginBottom: '32px' }}>
              Health Dashboard Component Test
            </h1>

            {/* Overall Score */}
            <div className="card">
              <h2>Overall Health Score</h2>
              <div
                style={{ display: 'flex', alignItems: 'center', gap: '24px' }}
              >
                <div
                  className="score-circle"
                  style={{
                    '--score': mockHealthData.overallScore,
                    width: '120px',
                    height: '120px',
                  }}
                >
                  <div className="score-text" style={{ fontSize: '32px' }}>
                    {mockHealthData.overallScore}
                  </div>
                </div>
                <div>
                  <h3 className={getScoreColor(mockHealthData.overallScore)}>
                    {getScoreStatus(mockHealthData.overallScore)}
                  </h3>
                  <p>Business: {mockHealthData.businessName}</p>
                  <p>Trajectory: {mockHealthData.trajectory}</p>
                  <p>Confidence: {mockHealthData.confidenceLevel}%</p>
                  <p>Data Quality: {mockHealthData.dataQuality}</p>
                </div>
              </div>
            </div>

            {/* Individual Scores */}
            <div className="grid">
              <HealthScoreCard
                score={mockHealthData.financialScore}
                label="Financial Health"
                description="Revenue, profitability, and financial stability"
              />
              <HealthScoreCard
                score={mockHealthData.growthScore}
                label="Growth Potential"
                description="Market expansion and scalability metrics"
              />
              <HealthScoreCard
                score={mockHealthData.operationalScore}
                label="Operational Efficiency"
                description="Process optimization and operational health"
              />
              <HealthScoreCard
                score={mockHealthData.saleReadinessScore}
                label="Sale Readiness"
                description="Preparation and attractiveness for acquisition"
              />
            </div>

            {/* Data Sources */}
            <div className="card">
              <h3>Data Sources & Quality</h3>
              <div className="grid">
                {Object.entries(mockHealthData.dataSources).map(
                  ([source, available]) => (
                    <div
                      key={source}
                      style={{
                        display: 'flex',
                        alignItems: 'center',
                        gap: '8px',
                      }}
                    >
                      <span
                        style={{ color: available ? '#22c55e' : '#f97316' }}
                      >
                        {available ? '✓' : '⚠'}
                      </span>
                      <span style={{ textTransform: 'capitalize' }}>
                        {source} Data
                      </span>
                      <span style={{ fontSize: '12px', color: '#64748b' }}>
                        {available ? 'Available' : 'Limited'}
                      </span>
                    </div>
                  )
                )}
              </div>
            </div>

            {/* Insights */}
            <div className="card">
              <h3>AI Insights</h3>
              <p>{mockHealthData.calculationMetadata.insights.summary}</p>

              <div
                style={{
                  display: 'grid',
                  gridTemplateColumns: '1fr 1fr',
                  gap: '24px',
                  marginTop: '16px',
                }}
              >
                <div>
                  <h4 style={{ color: '#22c55e' }}>Strengths</h4>
                  {mockHealthData.calculationMetadata.insights.keyStrengths.map(
                    (strength, index) => (
                      <div key={index} style={{ marginBottom: '8px' }}>
                        <strong>{strength.title}</strong>
                        <p
                          style={{
                            margin: '4px 0',
                            fontSize: '14px',
                            color: '#64748b',
                          }}
                        >
                          {strength.description}
                        </p>
                      </div>
                    )
                  )}
                </div>
                <div>
                  <h4 style={{ color: '#f97316' }}>Areas for Improvement</h4>
                  {mockHealthData.calculationMetadata.insights.keyWeaknesses.map(
                    (weakness, index) => (
                      <div key={index} style={{ marginBottom: '8px' }}>
                        <strong>{weakness.title}</strong>
                        <p
                          style={{
                            margin: '4px 0',
                            fontSize: '14px',
                            color: '#64748b',
                          }}
                        >
                          {weakness.description}
                        </p>
                      </div>
                    )
                  )}
                </div>
              </div>
            </div>

            <div
              style={{
                textAlign: 'center',
                marginTop: '32px',
                padding: '16px',
                backgroundColor: '#f0fdf4',
                borderRadius: '8px',
              }}
            >
              <strong style={{ color: '#22c55e' }}>
                ✓ Health Dashboard Components Test Successful
              </strong>
              <p style={{ margin: '8px 0', color: '#15803d' }}>
                All components render correctly with mock data
              </p>
            </div>
          </div>
        )
      }

      ReactDOM.render(<HealthDashboardTest />, document.getElementById('root'))
    </script>
  </body>
</html>
